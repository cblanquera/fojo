/**
 * Fojo - Form Object submission with a JS Object
 *
 * @version 0.0.2
 * @author Christian Blanquera <cblanquera@openovate.com>
 * @website https://github.com/cblanquera/fojo
 * @license MIT
 */
!function(){var t=function(){var t=jQuery;this._data={},this._url="",this._method="POST",this.on=function(n,e){return t(window).on(n,e),this},this.once=function(n,e){return t(window).one(n,e),this},this.off=function(n,e){return e?(t(window).unbind(n,e),this):(t(window).unbind(n),this)},this.send=function(){var e,i=new FormData;for(var r in this._data)if(this._data.hasOwnProperty(r)){if(this._data[r]instanceof FileList){for(e=0;e<this._data[r].length;e++)i.append(r+"["+e+"]",this._data[r][e]);continue}i.append(r,this._data[r])}return t.ajax({url:this._url,type:this._method,xhr:n.bind(this),data:i,cache:!1,contentType:!1,processData:!1,error:function(t,n,e){this.trigger("error",[e])},success:function(t){this.trigger("response",[t])}.bind(this)}),this.trigger("start"),this},this.setData=function(t,n){return"object"==typeof t?n?(this._data=t,this):(this._data=e(t),this):("string"==typeof t&&(this._data[t]=n),this)},this.setMethod=function(t){return this._method=t.toUpperCase(),this},this.setUrl=function(t){return this._url=t,this},this.trigger=function(){return t(window).trigger.apply(t(window),arguments),this};var n=function(){var n=this,e=t.ajaxSettings.xhr();return e.upload?(e.upload.addEventListener("progress",function(t){var e=0;t.lengthComputable&&(e=Math.round(100*t.loaded/t.total)),n.trigger("progress",[e.toString()])},!1),e.upload.addEventListener("error",function(){n.trigger("error",["An error occured while submitting the form"])},!1),e.upload.addEventListener("abort",function(){n.trigger("abort",["Submission aborted, please check internet connection"])},!1),e):void 0},e=function(t){var n={},e=function(t,r){if(Object(t)!==t)return void(n[r]=t);if(Array.isArray(t)){if(0==t.length)return void(n[r]=[]);for(var o=0;o<t.length;o++)e(t[o],r?r+"]["+o:""+o)}else{if(i(t))return void(n[r]=t);var s=!0;for(var a in t)s=!1,e(t[a],r?r+"]["+a:a);s&&(n[r]={})}};return e(t,""),n},i=function(t){if(t===Date||t===RegExp||t===Math||t===Array||t===Function||t===JSON||t===String||t===Boolean||t===Number||t instanceof Date||t instanceof RegExp||t instanceof Array||t instanceof String||t instanceof Boolean||t instanceof Number)return!0;if(/\{\s*\[native code\]\s*\}/.test(""+t))return!0;var n=Object.prototype.toString,e=Function.prototype.toString,i=/^\[object .+?Constructor\]$/,r=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),o=typeof t;return"function"===o?r.test(e.call(t)):t&&"object"===o&&i.test(n.call(t))||!1}};"function"==typeof define?define(["jquery","classified"],function(n,e){return function(){return e(t)()}}):"function"==typeof jQuery&&"function"==typeof jQuery.extend?jQuery.extend({fojo:function(){return this.classified(t)()}}):"object"==typeof window&&(window.fojo=function(){return window.classified(t)()})}();