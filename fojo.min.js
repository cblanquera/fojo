/**
 * Fojo - Form Object submission with a JS Object
 *
 * @version 0.0.3
 * @author Christian Blanquera <cblanquera@openovate.com>
 * @website https://github.com/cblanquera/fojo
 * @license MIT
 */
!function(){var t=function(){var t=jQuery;this._data={},this._url="",this._method="POST",this.on=function(n,i){return t(window).on(n,i),this},this.once=function(n,i){return t(window).one(n,i),this},this.off=function(n,i){return i?(t(window).unbind(n,i),this):(t(window).unbind(n),this)},this.send=function(){var i,e=new FormData;for(var r in this._data)if(this._data.hasOwnProperty(r)){if(this._data[r]instanceof FileList){for(i=0;i<this._data[r].length;i++)e.append(r+"["+i+"]",this._data[r][i]);continue}if("undefined"==typeof this._data[r]||null===this._data[r]){e.append(r,"");continue}e.append(r,this._data[r])}return t.ajax({url:this._url,type:this._method,xhr:n.bind(this),data:e,cache:!1,contentType:!1,processData:!1,error:function(t,n,i){this.trigger("error",[i])}.bind(this),success:function(t){this.trigger("response",[t])}.bind(this)}),this.trigger("start"),this},this.setData=function(t,n){return"object"==typeof t?n?(this._data=t,this):(this._data=i(t),this):("string"==typeof t&&(this._data[t]=n),this)},this.setMethod=function(t){return this._method=t.toUpperCase(),this},this.setUrl=function(t){return this._url=t,this},this.trigger=function(){return t(window).trigger.apply(t(window),arguments),this};var n=function(){var n=this,i=t.ajaxSettings.xhr();return i.upload?(i.upload.addEventListener("progress",function(t){var i=0;t.lengthComputable&&(i=Math.round(100*t.loaded/t.total)),n.trigger("progress",[i.toString()])},!1),i.upload.addEventListener("error",function(){n.trigger("error",["An error occured while submitting the form"])},!1),i.upload.addEventListener("abort",function(){n.trigger("abort",["Submission aborted, please check internet connection"])},!1),i):void 0},i=function(t){var n={},i=function(t,r){if(Object(t)!==t)return void(n[r]=t);if(Array.isArray(t)){if(0==t.length)return void(n[r]=[]);for(var o=0;o<t.length;o++)i(t[o],r?r+"]["+o:""+o)}else{if(e(t))return void(n[r]=t);var a=!0;for(var s in t)a=!1,i(t[s],r?r+"]["+s:s);a&&(n[r]={})}};return i(t,""),n},e=function(t){if(t===Date||t===RegExp||t===Math||t===Array||t===Function||t===JSON||t===String||t===Boolean||t===Number||t instanceof Date||t instanceof RegExp||t instanceof Array||t instanceof String||t instanceof Boolean||t instanceof Number)return!0;if(/\{\s*\[native code\]\s*\}/.test(""+t))return!0;var n=Object.prototype.toString,i=Function.prototype.toString,e=/^\[object .+?Constructor\]$/,r=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),o=typeof t;return"function"===o?r.test(i.call(t)):t&&"object"===o&&e.test(n.call(t))||!1}};"function"==typeof define?define(["jquery","classified"],function(n,i){return function(){return i(t)()}}):"function"==typeof jQuery&&"function"==typeof jQuery.extend?jQuery.extend({fojo:function(){return this.classified(t)()}}):"object"==typeof window&&(window.fojo=function(){return window.classified(t)()})}();